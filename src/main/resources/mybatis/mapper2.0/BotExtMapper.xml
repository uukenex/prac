<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="my.prac.core.prjbot.dao.BotExtDAO">
	<insert id="insertMerchantReport" parameterType="my.prac.core.ext.dto.MerchantReportVO">
	    INSERT INTO TBOT_MERCHANT_REPORT (
	        SERVER_ID,
	        START_TIME_KST,
	        END_TIME_KST,
	        REGION_ID,
	        ITEM_ID,
	        TIME_VAL,
	        INSERT_DATE
	    )
	    VALUES (
	        #{serverId},
	        #{startTimeKst},
	        #{endTimeKst},
	        #{regionId},
	        #{itemId},
	        #{timeVal},
	        SYSDATE
	    )
	</insert>
	
	<select id="selectMerchantMasterAll" resultType="my.prac.core.ext.dto.MerchantMasterVO">
	    SELECT ITEM_ID AS itemId,
	           ITEM_GRADE AS itemGrade
	    FROM TBOT_MERCHANT_M
	</select>
	
	<select id="selectMerchantByTimeVal" parameterType="map" resultType="map">
	    SELECT B.ITEM_NAME,
	           B.REGION_NAME
	    FROM TBOT_MERCHANT_REPORT A
	    JOIN TBOT_MERCHANT_M B
	      ON A.ITEM_ID   = B.ITEM_ID
	     AND A.REGION_ID = B.REGION_ID
	    WHERE A.TIME_VAL  = #{timeVal}
	      AND A.SERVER_ID = #{serverId}
	    ORDER BY B.REGION_NAME, B.ITEM_NAME
	</select>
</mapper>